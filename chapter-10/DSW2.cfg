! --- Global Settings ---
hostname DSW2
no ip domain lookup
vtp mode off

! --- Console Settings ---
line console 0
  logging synchronous
  exec-timeout 20 0
exit

! --- VLAN config ---
vlan 10
  name NATIVE
  exit
vlan 20
  name USER_DATA
  exit
vlan 30
  name SERVER_FARM
  exit

! --- Spanning Tree Protocol ---
spanning-tree mode rapid-pvst
spanning-tree vlan 10,20 root secondary
spanning-tree vlan 30 priority 8192

! --- Etherchannel 1 (Static) ---
! --- DSW2 <---> DSW1 ---
! --- Physical Interfaces: g0/0, g0/1 ---
default interface range g0/0-1
int range g0/0-1
  description CORE_TRUNK_DSW2_DSW1
  switchport trunk encapsulation dot1q
  switchport mode trunk
  switchport trunk native vlan 10
  switchport nonegotiate
  no shutdown
  channel-group 1 mode on
  exit

! --- Ethechannel 2 (LACP) ---
! --- DSW2 <---> DSW3 ---
! --- Physical Interfaces: g1/0, g1/1 ---
default interface range g1/0-1
int range g1/0-1
  description CORE_TRUNK_DSW2_DSW3
  switchport trunk encapsulation dot1q
  switchport mode trunk
  switchport trunk native vlan 10
  switchport nonegotiate
  no shutdown
  channel-group 2 mode active
  exit

! --- Ethechannel 11 (LACP) ---
! --- DSW2 <---> ASW1 ---
! --- Physical Interfaces: g1/2, g1/3 ---
default interface range g1/2-3
int range g1/2-3
  description UPLINK_DSW2_ASW1
  switchport trunk encapsulation dot1q
  switchport mode trunk
  switchport trunk native vlan 10
  switchport nonegotiate
  no shutdown
  channel-group 11 mode active
  exit

! --- Ethechannel 20 (PAgP) ---
! --- DSW2 <---> ASW2 ---
! --- Physical Interfaces: g0/2, g0/3 ---
default interface range g0/2-3
int range g0/2-3
  description UPLINL_DSW2_ASW2
  switchport trunk encapsulation dot1q
  switchport mode trunk
  switchport trunk native vlan 10
  switchport nonegotiate
  no shutdown
  channel-group 20 mode auto
  exit

! --- Security ---
int range port-channel 11, port-channel 20
  spanning-tree guard root
  exit
