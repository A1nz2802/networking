! --- Global Settings ---
hostname DSW3
no ip domain lookup
vtp mode off

! --- Console Settings ---
line console 0
  logging synchronous
  exec-timeout 20 0
exit

! --- VLAN Config ---
vlan 10
  name NATIVE
  exit
vlan 20
  name USER_DATA
  exit
vlan 30
  name SERVER_FARM
  exit

! --- Spanning Tree Protocol ---
spanning-tree mode rapid-pvst
spanning-tree vlan 10,20,30 priority 32768

! --- Ethechannel 2 (LACP) ---
! --- DSW3 <---> DSW2 ---
! --- Physical Interfaces: g1/0, g1/1 ---
default interface range g1/0-1
int range g1/0-1
  description CORE_TRUNK_DSW3_DSW2
  switchport trunk encapsulation dot1q
  switchport mode trunk
  switchport trunk native vlan 10
  switchport nonegotiate
  no shutdown
  channel-group 2 mode passive
  exit

! --- Ethechannel 3 (LACP) ---
! --- DSW3 <---> DSW1 ---
! --- Physical Interfaces: g0/0, g0/1 ---
default interface range g0/0-1
int range g0/0-1
  description CORE_TRUNK_DSW3_DSW1
  switchport trunk encapsulation dot1q
  switchport mode trunk
  switchport trunk native vlan 10
  switchport nonegotiate
  no shutdown
  channel-group 3 mode active
  exit

! --- Ethechannel 21 (PAgP) ---
! --- DSW3 <---> ASW2 ---
! --- Physical Interfaces: g0/2, g0/3 ---
default interface range g0/2-3
int range g0/2-3
  description UPLINK_DSW3_ASW2
  switchport trunk encapsulation dot1q
  switchport mode trunk
  switchport trunk native vlan 10
  switchport nonegotiate
  no shutdown
  channel-group 21 mode auto
  exit
