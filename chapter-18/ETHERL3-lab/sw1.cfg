enable
configure terminal
hostname SW1

! 1. ENABLE ROUTING ENGINE
ip routing

! 2. USER LAN CONFIGURATION (VLAN 10)
vlan 10
 name Sales_Dept
exit

int g0/3
 description Host Linux 1
 switchport mode access
 switchport access vlan 10
 no shutdown
 exit

interface vlan 10
 description Gateway for VLAN 10
 ip address 192.168.10.1 255.255.255.0
 no shutdown
 exit

! 3. LAYER 3 ETHERCHANNEL CONFIGURATION
int port-channel 1
 description L3 EtherChannel to SW2
 ! CRITICAL: Turn off Layer 2 switching on this logical interface
 no switchport
 ! Assign the IP address to the "pipe", not the physical ports
 ip address 10.0.0.1 255.255.255.252
 no shutdown
 exit

! 4. PHYSICAL MEMBER PORTS CONFIGURATION
int range g0/0-2
 description Member of Po1
 ! CRITICAL: Ports must be Layer 3 before joining the group
 no switchport
 ! LACP Negotiation (Active = I want to form the channel)
 channel-group 1 mode active
 no shutdown
 exit

! 5. ROUTING (Reaching the neighbor network)
! To go to 192.168.20.0/24, send traffic to Switch2's EtherChannel IP
ip route 192.168.20.0 255.255.255.0 10.0.0.2

end
write memory
